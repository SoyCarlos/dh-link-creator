<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="Header">
        <h1>DataHub Link Creator</h1>
        <h3>By <a href="https://carlos.soy" target="_blank">Carlos Eduardo Ortega</a></h3>
        <h3><a href="https://github.com/SoyCarlos/dh-link-creator">Github Repo</a></h3>
    </div>
    <div class="link-creator">
        <div class="user-input">
            <a id="repo-desc">Link to Github Repo Here</a>
            <input type="text" id="repo" name="repo" placeholder="github.com/your-repo-here" onchange="update_url()">
            <a id="file-desc">Subpath to a notebook file (optional)</a>
            <input type="text" id="file" name="file" placeholder="path/to/notebook.ipynb" onchange="add_subpath()">
        </div>
        <div class="user-output1">
            <a>Copy the URL below and share your DataHub Repo with others:</a>
            <p id="dh-url">Fill in the fields to see your DataHub URL here.</p>
            <script>
                function update_url() {
                    var repo_url = document.getElementById('repo').value;
                    if (repo_url == "") {
                        document.getElementById("dh-url").innerHTML = "Fill in the fields to see your DataHub URL here.";
                    }
                    else {
                        document.getElementById("dh-url").innerHTML = "http://datahub.berkeley.edu/hub/user-redirect/git-sync?repo=" + repo_url;
                        markdown_update(document.getElementById("dh-url").innerHTML);
                    }
                }
            </script>
            <script>
                function add_subpath() {
                    var repo_url = document.getElementById('repo').value;
                    var file_path = document.getElementById('file').value;
                    var file_path = file_path.replace(/\s/g, "-");
                    if (repo_url != "" && file_path != "") {
                        document.getElementById("dh-url").innerHTML = "http://datahub.berkeley.edu/hub/user-redirect/git-sync?repo=" + repo_url + "&subpath=" + file_path;
                        markdown_update(document.getElementById("dh-url").innerHTML)
                    }
                    if (file_path == "") {
                        update_url();
                    }
                }
            </script>
        </div>
        <div class="user-output2">
            <a>Copy the text below, then paste it into your README to show a DataHub badge: </a>
            <img src="assets/badge_logo.svg" width="10%">
            <p id="markdown">Fill in the fields to see the markdown badge snippet.</p>
            <script>
                function markdown_update(url, subpath) {
                    document.getElementById("markdown").innerHTML = "[![DataHub](https://i.ibb.co/s5V7XbX/badge-logo.png)](" + url + ")";
                }
            </script>
        </div>
    </div>
</body>

</html>